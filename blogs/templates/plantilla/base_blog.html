{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block titulo_pagina %} {% endblock titulo_pagina %} </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href=" {% static "css/post.css" %}">
        <link rel="stylesheet" href=" {% static "css/Style.css" %}">
        <link rel="stylesheet" href=" {% static "css/suscribe.css" %}">

        <!-- Font AWesome-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.css" integrity="sha512-U9Y1sGB3sLIpZm3ePcrKbXVhXlnQNcuwGQJ2WjPjnp6XHqVTdgIlbaDzJXJIAuCTp3y22t+nhI4B88F/5ldjFA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

        <!-- -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

         <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

</head>
<body>  

        <div class="loading-overlay" id="loadingOverlay">
                <div class="spinner"></div>
                <p>Cargando...</p>
        </div>

        <header class="header fixed-top">
                <nav class="nav-2" >
                  <div class="logo">
                      <a href="#"><img src="{% static '/images/logo.webp'%}" alt=""></a>
                  </div>
                  <!-- Acciones de menú-->
                  <div class="botones">
                        <a class="boton "   href="{% url 'index' %}">INICIO</a>
                        {% if  request.resolver_match.url_name == 'blog' %}
                        <a class="little-boton"  href="{% url 'blog' %}">GENERAL</a>
                        {% else %}
                        <a class="boton" href="{% url 'blog' %}">GENERAL</a>

                        {% endif %}
              
                        <a class="boton dropdown-toggle"  id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer">CATEGORIAS </a>
                        <div>
                         
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <li><a class="dropdown-item boton" href="{% url 'politica' %}">POLÍTICA</a></li>
                                <li><a class="dropdown-item boton" href="{% url 'tecnologia' %}">TECNOLOGÍA</a></li>
                                <li><a class="dropdown-item boton" href="{% url 'economia' %}">ECONOMÍA</a></li>
                                <li><a class="dropdown-item boton" href="{% url 'hidrocarburos' %}">HIDROCARBUROS</a></li>
                                <li><a class="dropdown-item boton" href="{% url 'medio_ambiente' %}">M/AMBIENTE</a></li>
                            </ul>
  
                        </div>
                       

 

                  </div>
                  {% if user.is_authenticated %}
                      
                      <div class="buton-cerrar">
                          {% if usuario.foto_perfil %}
                              <img class="imagen-perfil" onclick="perfil()" src="{{ usuario.foto_perfil.url }}" alt="">
                          {% else %}
                          
                              <img class="imagen-perfil" onclick="perfil()"  src="{% static 'images/sin_foto.webp'%}" alt="">
                          {% endif %}
                          <ul class="lista-perfil" id="lista-perfil">
                            <li class="imagen">
                              {% if usuario.foto_perfil %}
                              <img class="imagen-perfil" src="{{ usuario.foto_perfil.url }}" alt="">
                              {% else %}
                              
                              <img class="imagen-perfil" src="{% static 'images/sin_foto.webp'%}" alt="">
                              {% endif %}
                          </li>
                          <li class="informacion-perfil">
                              <h4> {{ user.username }} </h4>
                              
                          </li>
                          <li class="correo-perfil">
                              <p> {{ user.email }} </p>
                          </li>
                          <div class="perfil-cerrar">                  
              
                          <a href="{% url 'perfil' %}">
                            <i class="fa-solid fa-gear icons"></i>
                             &nbsp;Ajustes
                             
                
                              
                          </li>
                          <li>
                              <a href=" {% url 'logout_view' %} ">
                                  <i class="bi bi-box-arrow-left"></i>&nbsp; Cerrar Sesion
                              </a>
                          </li>
                          </div>
                          <li>
                          
                      </ul>
                      </div>
                  {% else %}
                      <div class="buton">
                          <button onclick="window.location.href='{% url 'login_view' %}' " type="button"><i class="fa-solid fa-right-to-bracket"></i>&nbsp;INICIAR SESION</button>
                      </div>
                  {% endif %}
                 
                </nav>
              </header>
        <br><br>
            <div class="image-blog">

                <div class="imagen-post">
                    <img src="{% block imagen %} {% endblock imagen %} " alt="Blog Informativo" class="img-fluid">
                </div>

                <div class="post-cabecera">
                    {% block titulo %}
                    <h1>Blog Informativo <br> Petrocentro</h1>
                    {% endblock titulo %}
                    
                </div>
                {% block buscar %}
                <div >
                    <form action="" method="get" class="buscar-post">
                        
                        <input type="text" id="busqueda" name="busqueda" class="form-control" placeholder="Buscar..." value="{{ request.GET.busqueda }}">
                        <button type="submit" class="btn btn-success"><i class="fa-solid fa-magnifying-glass"></i></button>
                    </form>
                </div>
                {% endblock buscar  %}
            </div>
        <br>
       
        <br><br>
        

        {% block content %}
        {% if posts %}
        <div class="post">
            {% for post in posts %}
                <div class="post-articulo" onclick="window.location.href='{% url 'detail-post' post.slug %}' ">
                    <div class="post-articulo-completo">
                        <img class="image-post" src="{{ post.image.url }}" alt="{{ post.image }}">
                        <br>
                        <p class="post-fecha">{{ post.fecha_creacion }}</p>
                        <p class="post-titulo">{{ post.titulo }}</p>
                    </div>
                    <div class="creador-post">
                        <div class="creador-post-detail">
                            <div class="post-creador-foto">
                                {% if post.author.foto_perfil %}
                                    <img class="imagen-perfil" src="{{ post.author.foto_perfil.url }}" alt="{{ post.author.foto_perfil.name }}">
                                {% else %}
                                    <img class="imagen-perfil" src="{% static 'images/sin_foto.webp'%}" alt="Sin imagen de Perfil">
                                {% endif %}
                            </div>
                            <div class="post-creador-nombre">
                                <p class="nombre-creador">{{ post.author.nombre }} <br>
                                    <span class="fecha">{{ post.fecha_creacion|date:'d-M-Y h:m' }}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="post-no-encontrado">
            <img src="{% static "images/nofound.webp" %}" alt="">
            <h1 class="text-center">NO HAY ARTÍCULOS CON EL CRITERIO DE BÚSQUEDA</h1>
        </div>
        <hr>
    {% endif %}
        {% endblock content %}
        
        <div class="paginacion">
            <div class="anterior">
                    {% if posts.has_previous %}

                            <a href="?page={{ posts.previous_page_number }}{% if request.GET.busqueda  %}&busqueda={{ request.GET.busqueda }}{% endif %}" class="btn"> <i class="fa-solid fa-arrow-left"></i> </a>
                    {% endif %}
            </div>
            <div class="siguiente">

                    {% if posts.has_next %}
                            <a href="?page={{ posts.next_page_number }}{% if request.GET.busqueda  %}&busqueda={{ request.GET.busqueda }}{% endif %}"  class="btn"> Siguiente <i class="fa-solid fa-arrow-right"></i> </a>
                    {% endif %}

            </div>

        </div>
        
        {% block posts %}
        
        {% endblock posts %}
<hr>
<div class="subscribe-container">
    <div class="oil-drop"></div>
    <div class="oil-drop"></div>
    <div class="oil-drop"></div>
    <h2 class="subscribe-title">Suscríbete a Nuestro Blog</h2>
    <p class="subscribe-description">Recibe las últimas noticias y análisis de la industria.</p>
    <form id="subscribeForm" class="subscribe-form">
        <input type="email" id="emailInput" class="subscribe-input" placeholder="Tu correo electrónico" required>
        <button type="submit" class="subscribe-button">Suscribirse</button>
    </form>
    <div id="messageBox" class="message" style="display: none;"></div>
</div>

        <footer >

                <!-- Primer sección del pie de página-->
                 <section class="pie_pagina">
                <div class="grupo1">
                    <div class="box">
                    </div>
                    <div class="box">
                      <figure>
                        
                              <a href="index2.html">
                              <img class="img-fluid" src="{% static '/images/logo.webp'%}" alt="logotipo de Petrocentro S.A.S">
                              </a>
                        
                          <div class="red_social  ">
                            <a href="#" > &nbsp; <i class="fa-brands fa-facebook"> &nbsp; </i></a>
                            <a href="https://www.instagram.com/petrocentrosas/" > &nbsp; <i class="fa-brands fa-instagram"> &nbsp; </i></a>
                            <a href="https://www.youtube.com/channel/UCUxezbHPb1e5seChlAnSb7A" > &nbsp; <i class="fa-brands fa-youtube"> &nbsp; </i></a>
                            <a href="https://www.linkedin.com/company/petrocentro-sas/" > &nbsp; <i class="fa-brands fa-linkedin"></i>  </a>
                          </div>
                      </figure>
                    
                    </div>
              
                </div>

                <!-- Segunda seccion del pie de pagina-->
                <div class="grupo2">
                   
                    <small >
                      <hr>
                    &copy; 2020 <b>Petrocentro S.A.S</b> - Todos Los Derechos Reservados.
                    </small>
                </div>
                
                
        </footer>
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="{% static 'js/script.js' %}"></script>
        <script src="{% static 'js/suscribeForm.js' %}"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // Selecciona todas las imágenes dentro del contenido de Summernote
                let videos = document.querySelectorAll('.summernote-content iframe, .summernote-content video, .summernote-content embed');
                videos.forEach(function(video) {
                    // Envuelve el video en un div con la clase responsive-video
                    var wrapper = document.createElement('div');
                    wrapper.classList.add('responsive-video');
                    video.parentNode.insertBefore(wrapper, video);
                    wrapper.appendChild(video);
                });
                let images = document.querySelectorAll('.summernote-content img');
                images.forEach(function(img) {
                    img.classList.add('responsive-img'); // Agrega la clase responsiva
                });
            });

          
        
        </script>

</body>
</html>